<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Parent Page</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .iframe-container {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 20px 0;
    }
    /* hidden until we trigger it */
    #myFullscreenOverlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      background-color: rgba(0,0,0,0.2);
    }
    body.blurred > *:not(#myFullscreenOverlay) { 
      filter: blur(8px); 
    }
  </style>
</head>
<body>
  <h1>Parent Page</h1>
  <p>This is the parent page that hosts the launcher iframe. When you click the button in the iframe below, it will trigger a fullscreen overlay with another iframe while blurring this page.</p>
  
  <div class="iframe-container">
    <h2>Launcher iframe:</h2>
    <iframe src="launcher.html" width="100%" height="150" frameborder="0"></iframe>
  </div>

  <div id="myFullscreenOverlay"></div>

  <script>
  window.addEventListener('message', e => {
    if (e.data.type === 'LAUNCH_FSR_IFRAME') {
      const iframeUrl = e.data.url; // <-- get the URL from the message
      document.body.classList.add('blurred');
      const ov = document.getElementById('myFullscreenOverlay');
      ov.innerHTML = `
        <iframe src="${iframeUrl}"
                style="width:50%; height:50%; border:none">
        </iframe>
        <button id="closeFSR" style="position:absolute;top:1em;right:1em;">
          âœ•
        </button>`;
      ov.style.display = 'flex';
      ov.querySelector('#closeFSR').onclick = () => {
        document.body.classList.remove('blurred');
        ov.style.display = 'none';
        ov.innerHTML = '';
      };
    }
  });
</script>
  </script>
</body>
</html> 